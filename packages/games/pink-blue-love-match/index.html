<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Pink Blue Love Match</title>
    <link rel="icon" type="image/GIF" href="res/favicon.ico"/>
    <meta name="viewport" content="width=321,user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="full-screen" content="yes"/>
    <meta name="screen-orientation" content="portrait"/>
    <meta name="x5-fullscreen" content="true"/>
    <meta name="360-fullscreen" content="true"/>
    <style>
        body, canvas, div {
            -moz-user-select: none;
            -webkit-user-select: none;
            -ms-user-select: none;
            -khtml-user-select: none;
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
        }
    </style>
    <script src="game.min.js"></script>
</head>
<body style="padding:0; margin: 0; background: #000;">
	<canvas id="gameCanvas" style=" height: 100%;width: 100%;margin: 0;padding: 0;display: block;"></canvas>
	<script language=javascript>
		var mebtnopenurl = '/';
		window.shareData = {
		        "imgUrl": "/games/pink-blue-love-match/share.png",
		        "timeLineLink": window.location.href,
		        "tTitle": "Pink Blue Love Match",
		        "tContent": "Pink Blue Love Match - Test your romance fortune!"
		};
				
		function goHome(){
			// Navigate to home page
			if (window.parent && window.parent !== window) {
				window.parent.postMessage({ type: 'NAVIGATE_TO_HOME' }, '*');
			} else {
				window.location.href = '/';
			}
		}
		
		function clickMore(){
			// Navigate to home page
			if (window.parent && window.parent !== window) {
				window.parent.postMessage({ type: 'NAVIGATE_TO_HOME' }, '*');
			} else {
				window.location.href = '/';
			}
		}
		
		function dp_share(){
			// Use project's share functionality
			if (window.parent && window.parent !== window) {
				window.parent.postMessage({
					type: 'SHARE_GAME',
					data: {
						score: myData.score || 0,
						gameId: 'pink-blue-love-match'
					}
				}, '*');
			} else {
				// Fallback: show share overlay
				document.getElementById("share").style.display="";
			}
		}
		
		function dp_Ranking(){
			goHome();
		}

		function showAd(){
		}
		function hideAd(){
		}
		document.addEventListener('WeixinJSBridgeReady', function onBridgeReady() {
		    
		    WeixinJSBridge.on('menu:share:appmessage', function(argv) {
		        WeixinJSBridge.invoke('sendAppMessage', {
		            "img_url": window.shareData.imgUrl,
		            "link": window.shareData.timeLineLink,
		            "desc": window.shareData.tContent,
		            "title": window.shareData.tTitle
		        }, onShareComplete);
		    });

		    WeixinJSBridge.on('menu:share:timeline', function(argv) {
		        WeixinJSBridge.invoke('shareTimeline', {
		            "img_url": window.shareData.imgUrl,
		            "img_width": "640",
		            "img_height": "640",
		            "link": window.shareData.timeLineLink,
		            "desc": window.shareData.tContent,
		            "title": window.shareData.tTitle
		        }, onShareComplete);
		    });
		}, false);
		</script>
		<div id=share style="display: none">
			<img width="100%" src="./share.png"
				style="position: fixed; z-index: 9999; top: 0; left: 0; display: "
				ontouchstart="document.getElementById('share').style.display='none';" />
		</div>
			<script type="text/javascript">
            var myData = { gameid: "pink-blue-love-match" };
			function dp_submitScore(score){
						myData.score = parseInt(score);
						myData.scoreName = "Romance Fortune Index " + score + " points";		
						document.title = window.shareData.tTitle = "My romance fortune index is " + score + " points! Come test your love fortune!";
			}
			function onShareComplete(res) {
                if (localStorage.myuid && myData.score != undefined) {
                    setTimeout(function(){
                        // Navigate to home
						if (window.parent && window.parent !== window) {
							window.parent.postMessage({ type: 'NAVIGATE_TO_HOME' }, '*');
						} else {
							window.location.href = '/';
						}
                    }, 500);
                }
				else {
					if (window.parent && window.parent !== window) {
						window.parent.postMessage({ type: 'NAVIGATE_TO_HOME' }, '*');
					} else {
						window.location.href = '/';
					}
				}
	        }
			</script>
			<script type="text/javascript" src="./js/game9g.utils.js"></script>
</body>
</html>